<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Feb 8, 2014 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140208" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Rockhopper Music - CPD Results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/genedelisa/rockymusic">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.rockhoppertech.com/blog/" id="bannerLeft">
                                                                                                <img src="../../rockymusic/images/rocky-scream-25.jpg"  alt="Rockhopper"/>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                        <img src="http://maven.apache.org/images/maven-small.gif" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2014-02-08
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.0.1-SNAPSHOT
                      </li>
                      
                
            
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://rockhoppertech.com/blog" class="externalLink" title="Rockhopper blog">
        Rockhopper blog</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://rockhoppertech.com/" class="externalLink" title="Rockhopper Technologies">
        Rockhopper Technologies</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Project dox</li>
                              
      <li>
  
                          <a href="../../rockymusic/overview.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/quickstart.html" title="Quick Start">
          <i class="none"></i>
        Quick Start</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/midiTracks.html" title="MIDI Tracks">
          <i class="none"></i>
        MIDI Tracks</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/chords.html" title="Chords">
          <i class="none"></i>
        Chords</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/scales.html" title="Scales">
          <i class="none"></i>
        Scales</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/functional.html" title="Functional">
          <i class="none"></i>
        Functional</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/timeseries.html" title="Time Series">
          <i class="none"></i>
        Time Series</a>
            </li>
                
      <li>
  
                          <a href="../../rockymusic/faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-down"></i>
        Project Reports</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="surefire-report.html" title="Surefire Report">
          <i class="none"></i>
        Surefire Report</a>
            </li>
                    
      <li>
  
                          <a href="checkstyle.html" title="Checkstyle">
          <i class="none"></i>
        Checkstyle</a>
            </li>
                    
      <li>
  
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">
          <i class="none"></i>
        Cobertura Test Coverage</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>CPD Report</a>
          </li>
                    
      <li>
  
                          <a href="pmd.html" title="PMD Report">
          <i class="none"></i>
        PMD Report</a>
            </li>
                    
      <li>
  
                          <a href="findbugs.html" title="FindBugs Report">
          <i class="none"></i>
        FindBugs Report</a>
            </li>
                    
      <li>
  
                          <a href="taglist.html" title="Tag List">
          <i class="none"></i>
        Tag List</a>
            </li>
                    
      <li>
  
                          <a href="dev-activity.html" title="Developer Activity">
          <i class="none"></i>
        Developer Activity</a>
            </li>
                    
      <li>
  
                          <a href="file-activity.html" title="File Activity">
          <i class="none"></i>
        File Activity</a>
            </li>
                    
      <li>
  
                          <a href="changelog.html" title="Change Log">
          <i class="none"></i>
        Change Log</a>
            </li>
                    
      <li>
  
                          <a href="dependency-updates-report.html" title="Dependency Updates Report">
          <i class="none"></i>
        Dependency Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="plugin-updates-report.html" title="Plugin Updates Report">
          <i class="none"></i>
        Plugin Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="property-updates-report.html" title="Property Updates Report">
          <i class="none"></i>
        Property Updates Report</a>
            </li>
              </ul>
        </li>
            </ul>
                
            
                
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://genedelisa.github.com/rockymusic/rockymusic-core" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://genedelisa.github.com/rockymusic/rockymusic-core&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/genedelisa" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow genedelisa</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.0.2.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/modifiers/AbstractMIDINoteModifier.java</td><td>85</td></tr><tr class="a"><td>com/rockhoppertech/music/modifiers/AbstractModifier.java</td><td>89</td></tr><tr class="b"><td colspan='2'><div><pre>    public void setSuccessor(MIDINoteModifier successor) {
        this.successor = successor;
    }

    @Override
    public void setOperation(Operation operation) {
        this.operation = operation;
    }

   

    public static double quantize(final double value, final double q) {
        double result = 0d;
        int decimalPlaces = 3;
        BigDecimal ratio = null;

        if (value == q) {
            // System.err.printf(&quot;value %f == %f no change\n&quot;,
            // value,
            // q);
            return value;
        }

        if (value &lt; q) {
            double v = value;
            // make it q at a minimum
            while (v &lt; q) {
                v += q;
            }
            ratio = new BigDecimal(v);
            ratio = ratio.setScale(decimalPlaces, BigDecimal.ROUND_HALF_DOWN);
            ratio = ratio.divide(new BigDecimal(q));
            // System.err.println(ratio.doubleValue());
            result = Math.floor(ratio.doubleValue()) * q;

            // can't have a duration of 0 for example
            if (result == 0d) {
                result = value &lt; q ? value : q;
            }
            // System.err.println(&quot;&lt;&quot;);
            return result;
        }

        ratio = new BigDecimal(value);
        ratio = ratio.setScale(decimalPlaces, BigDecimal.ROUND_HALF_UP);
        ratio = ratio.divide(new BigDecimal(q));

        // System.err.println(ratio.doubleValue());
        // System.err.println(&quot;&gt;&quot;);
        result = Math.floor(ratio.doubleValue()) * q;
        // System.err.printf(&quot;value is %f quant %f is %f\n&quot;,
        // value,
        // q,
        // result);
        return result;
    }

    /**
     * @return the values
     */
    public List&lt;Number&gt; getValues() {
        return values;
    }

    /**
     * @param values
     *            the values to set
     */
    public void setValues(List&lt;Number&gt; values) {
        logger.debug(&quot;adding values {}&quot;, values);        
        this.values.clear();
        for (Number n : values) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }
    private void setValues(Number[] numbers) {
        //logger.debug(&quot;setting {}&quot;, numbers);
        this.values.clear();
        for (Number n : numbers) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }
    
    @Override
    public void setValues(final double[] array) {
        this.values.clear();
        for (final double element : array) {
            values.add(element);
        }
    }

    /**
     * @return the operation
     */
    public Operation getOperation() {
        return operation;
    }

    /**
     * @return the successor
     */
    public MIDINoteModifier getSuccessor() {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>206</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>360</td></tr><tr class="b"><td colspan='2'><div><pre>            throws UnknownChordException {
        DocumentBuilder db = null;
        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setCoalescing(true);
            dbf.setExpandEntityReferences(true);
            dbf.setIgnoringComments(false);
            dbf.setIgnoringElementContentWhitespace(true);
            dbf.setNamespaceAware(true);
            dbf.setValidating(false);
            db = dbf.newDocumentBuilder();
            // db.setEntityResolver(EntityResolver er);
            // db.setErrorHandler(ErrorHandler eh);
        } catch (ParserConfigurationException e) {
            logger.error(e.getLocalizedMessage(), e);
            e.printStackTrace();
            return null;
        }

        Document doc = null;
        try {
            InputSource is = new InputSource(new StringReader(xml));
            doc = db.parse(is);
            doc.normalize();
        } catch (SAXParseException spe) {
            logger.error(spe.getLocalizedMessage(), spe);
            Exception x = spe.getException();
            if (x != null) {
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (SAXException sxe) {
            Exception x = sxe;
            if (sxe.getException() != null) {
                x = sxe.getException();
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (IOException ioe) {
            ioe.printStackTrace();
            logger.error(ioe.getLocalizedMessage(), ioe);            
            return null;
        } catch (Throwable t) {
            t.printStackTrace();
            logger.error(t.getLocalizedMessage(), t);            
            return null;
        }

        Element e = doc.getDocumentElement();
        String name = e.getTagName();
        logger.debug(&quot;parsing chords document element &quot; + name);
        Chord chord = null;</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>792</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/xml/ScaleFactoryXMLHelper.java</td><td>421</td></tr><tr class="b"><td colspan='2'><div><pre>    private static Integer[] parseIntervals(Node intervals) {
        NodeList sc = intervals.getChildNodes();
        int len = sc.getLength();
        int[] a = new int[len];
        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();

        for (int i = 0; i &lt; len; i++) {
            Node nn = sc.item(i);
            if (nn.getNodeName().equalsIgnoreCase(&quot;interval&quot;)) {
                // System.out.println(nn.getTextContent());
                a[i] = Integer.parseInt(nn.getTextContent());
                list.add(Integer.parseInt(nn.getTextContent()));
            }
        }
        Integer[] array = new Integer[list.size()];
        return list.toArray(array);
    }

    private static String parseSpelling(Node spelling) {
        StringBuilder sb = new StringBuilder();
        NodeList sc = spelling.getChildNodes();
        int len = sc.getLength();
        for (int i = 0; i &lt; len; i++) {
            Node nn = sc.item(i);
            if (nn.getNodeName().equalsIgnoreCase(&quot;degree&quot;)) {
                sb.append(nn.getTextContent());
                sb.append(' ');
            }
        }
        return sb.toString();
    }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>360</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>441</td></tr><tr class="b"><td colspan='2'><div><pre>    public static Chord xmlToChord(String xml) {
        DocumentBuilder db = null;
        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setCoalescing(true);
            dbf.setExpandEntityReferences(true);
            dbf.setIgnoringComments(false);
            dbf.setIgnoringElementContentWhitespace(true);
            dbf.setNamespaceAware(true);
            dbf.setValidating(false);
            db = dbf.newDocumentBuilder();
            // db.setEntityResolver(EntityResolver er);
            // db.setErrorHandler(ErrorHandler eh);
        } catch (ParserConfigurationException e) {
            logger.error(e.getLocalizedMessage(), e);
            e.printStackTrace();
            return null;
        }

        Document doc = null;
        try {
            InputSource is = new InputSource(new StringReader(xml));
            doc = db.parse(is);
            doc.normalize();
        } catch (SAXParseException spe) {
            logger.error(spe.getLocalizedMessage(), spe);
            Exception x = spe.getException();
            if (x != null) {
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (SAXException sxe) {
            Exception x = sxe;
            if (sxe.getException() != null) {
                x = sxe.getException();
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (IOException ioe) {
            ioe.printStackTrace();</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>206</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>441</td></tr><tr class="b"><td colspan='2'><div><pre>            throws UnknownChordException {
        DocumentBuilder db = null;
        try {
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setCoalescing(true);
            dbf.setExpandEntityReferences(true);
            dbf.setIgnoringComments(false);
            dbf.setIgnoringElementContentWhitespace(true);
            dbf.setNamespaceAware(true);
            dbf.setValidating(false);
            db = dbf.newDocumentBuilder();
            // db.setEntityResolver(EntityResolver er);
            // db.setErrorHandler(ErrorHandler eh);
        } catch (ParserConfigurationException e) {
            logger.error(e.getLocalizedMessage(), e);
            e.printStackTrace();
            return null;
        }

        Document doc = null;
        try {
            InputSource is = new InputSource(new StringReader(xml));
            doc = db.parse(is);
            doc.normalize();
        } catch (SAXParseException spe) {
            logger.error(spe.getLocalizedMessage(), spe);
            Exception x = spe.getException();
            if (x != null) {
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (SAXException sxe) {
            Exception x = sxe;
            if (sxe.getException() != null) {
                x = sxe.getException();
                logger.error(x.getLocalizedMessage(), x);
            }
            return null;
        } catch (IOException ioe) {
            ioe.printStackTrace();</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/function/AbstractMIDINoteFunction.java</td><td>74</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/function/AbstractMusicFunction.java</td><td>88</td></tr><tr class="b"><td colspan='2'><div><pre>    public AbstractMIDINoteFunction(final List&lt;Number&gt; list) {
        this(Operation.SET, list);
    }

    public void setOperation(Operation operation) {
        this.operation = operation;
    }

    /**
     * @return the operation
     */
    public Operation getOperation() {
        return operation;
    }

    /**
     * @return the values
     */
    public List&lt;Number&gt; getValues() {
        return values;
    }

    /**
     * @param values
     *            the values to set
     */
    public void setValues(List&lt;Number&gt; values) {
        logger.debug(&quot;adding values {}&quot;, values);
        this.values.clear();
        for (Number n : values) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }

    private void setValues(Number[] numbers) {
        // logger.debug(&quot;setting {}&quot;, numbers);
        this.values.clear();
        for (Number n : numbers) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }

    public void setValues(final double[] array) {
        this.values.clear();
        for (final double element : array) {
            values.add(element);
        }
    }

    /**
     * Whether we're creating a view or are duplicating the MIDINote.
     * 
     * @return the createDuplicate
     */
    public boolean isCreateDuplicate() {
        return createDuplicate;
    }

    /**
     * The default is to create a &quot;view&quot; of the collection. This makes it create
     * a duplicate.
     * 
     * @param createDuplicate
     *            the createDuplicate to set
     */
    public void setCreateDuplicate(boolean createDuplicate) {
        this.createDuplicate = createDuplicate;
    }

}</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/chord/ChordProgressionParser.java</td><td>71</td></tr><tr class="a"><td>com/rockhoppertech/music/chord/ChordProgressionParser.java</td><td>182</td></tr><tr class="b"><td colspan='2'><div><pre>            int beatsPerMeasure) throws UnknownChordException {
        ChordProgression chordProgression = new ChordProgression();
        inputString = stripCommands(inputString);
        chordProgression.setKey(key);
        chordProgression.setBeatsPerMeasure(beatsPerMeasure);
        if (logger.isDebugEnabled()) {
            logger.debug(String.format(&quot;stripped '%s'&quot;, inputString));
        }
        Scanner scanner = new Scanner(inputString.trim());
        scanner.useDelimiter(&quot;\\|&quot;);
        int mnum = 1;
        List&lt;Chord&gt; measure = null;
        while (scanner.hasNext()) {
            String measureString = scanner.next().trim();
            boolean hasSlashes = false;
            if (measureString.indexOf('/') != -1) {
                hasSlashes = true;
            }
            Scanner measureScanner = new Scanner(measureString);
            measure = new ArrayList&lt;Chord&gt;(8);
            Chord previousChord = null;
            Chord chord = null;
            while (measureScanner.hasNext()) {
                String symbol = measureScanner.next().trim();</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>381</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>466</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>505</td></tr><tr class="a"><td colspan='2'><div><pre>    public static String getKeySignatureName(int mm, int sf) {
        boolean sharps = false;
        boolean major = false;

        if (sf &lt; 0) {
            sharps = false;
        } else if (sf &gt; 0) {
            sharps = true;
        }

        if (1 == mm) {
            major = false;
        } else {
            major = true;
        }
        String[] sharpKeys = { &quot;C&quot;, &quot;G&quot;, &quot;D&quot;, &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot; };
        String[] flatKeys = { &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot;, &quot;Db&quot;, &quot;Gb&quot;, &quot;Cb&quot; };
        String[] sharpMinorKeys = { &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot;, &quot;G#&quot;, &quot;D#&quot;, &quot;A#&quot; };
        String[] flatMinorKeys = { &quot;A&quot;, &quot;D&quot;, &quot;G&quot;, &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot; };
        int num = Math.abs(sf);
        String str = &quot;&quot;;</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/collections/CircularArrayList.java</td><td>120</td></tr><tr class="b"><td>com/rockhoppertech/collections/CircularLinkedList.java</td><td>91</td></tr><tr class="a"><td colspan='2'><div><pre>        E result = get(this.index++);
        this.updateFirstLast();

        return result;
    }

    /**
     * @return the previous element
     * @see com.rockhoppertech.collections.CircularList#previous()
     */
    @Override
    public final E previous() {
        if (--this.index &lt; 0) {
            this.index = size() - 1;
        }
        this.updateFirstLast();
        return get(this.index);
    }

    /**
     * @see com.rockhoppertech.collections.CircularList#reset()
     */
    @Override
    public final void reset() {
        this.index = 0;
        this.first = true;
        this.last = false;
    }

    /**
     * Updates this.first, this.last based on this.index
     */
    private void updateFirstLast() {
        if (this.index - 1 == size() - 1) {
            this.last = true;
        } else {
            this.last = false;
        }
        if (this.index == 0) {
            this.first = true;
        } else {
            this.first = false;
        }
    }

}</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>381</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>423</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>466</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>505</td></tr><tr class="a"><td colspan='2'><div><pre>    public static String getKeySignatureName(int mm, int sf) {
        boolean sharps = false;
        boolean major = false;

        if (sf &lt; 0) {
            sharps = false;
        } else if (sf &gt; 0) {
            sharps = true;
        }

        if (1 == mm) {
            major = false;
        } else {
            major = true;
        }
        String[] sharpKeys = { &quot;C&quot;, &quot;G&quot;, &quot;D&quot;, &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot; };
        String[] flatKeys = { &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot;, &quot;Db&quot;, &quot;Gb&quot;, &quot;Cb&quot; };
        String[] sharpMinorKeys = { &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot;, &quot;G#&quot;, &quot;D#&quot;, &quot;A#&quot; };
        String[] flatMinorKeys = { &quot;A&quot;, &quot;D&quot;, &quot;G&quot;, &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot; };</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/Pattern.java</td><td>264</td></tr><tr class="b"><td>com/rockhoppertech/music/Pattern.java</td><td>327</td></tr><tr class="a"><td colspan='2'><div><pre>        String s = String.format(&quot;%s - %s - s%d o%d d%f r%b g%f u%b&quot;,
                ArrayUtils.toString(this.degrees), ArrayUtils.toString(this
                        .getPattern()), this.getStartPitch(), this
                        .getNumOctaves(), this.getDuration(), this.isReverse(),
                this.getRestBetweenPatterns(), this.upAndDown);
        notelist.setName(s);
        s = String
                .format(
                        &quot;Generated from %s degrees.%nThe pattern applied was %s%nthe start pitch is %d%nnumber of octaves %d%nduration %f%nis reverse %b%ngap %f%nup and down %b%n&quot;,
                        ArrayUtils.toString(this.degrees),
                        ArrayUtils
                                .toString(this.getPattern()),
                        this
                                .getStartPitch(),
                        this.getNumOctaves(),
                        this
                                .getDuration(),
                        this.isReverse(),
                        this
                                .getRestBetweenPatterns(),
                        this.upAndDown);
        notelist.setDescription(s);

        // if (this.upAndDown) {
        // if (this.getScale().isDescendingDifferent()) {
        // MIDITrack reverse = ScaleFactory.createMIDITrack(this
        // .getStartPitch() + 12, this.getScale()
        // .getDescendingIntervals(), 1d, this.getDuration(), this
        // .getNumOctaves(), true);
        // notelist.append(reverse);
        // notelist.sequential();
        // } else {
        // MIDITrack reverse = notelist.retrograde();
        // notelist.append(reverse);
        // notelist.sequential();
        // }
        // }

        return notelist;
    }

    public MIDITrack createTrackWithLimit(final int limit) {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/MIDITrackFactory.java</td><td>1068</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/MIDITrackFactory.java</td><td>1114</td></tr><tr class="a"><td colspan='2'><div><pre>    public static MIDITrack applyPattern(MIDITrack track,
            List&lt;Integer&gt; pattern, int startingMIDINumber, final int nOctaves,
            final boolean reverse, boolean upAndDown) {

        MIDITrack result = new MIDITrack();

        if (reverse) {
            // Collections.sort(pattern, Collections.reverseOrder());
            Collections.reverse(pattern);
        } else if (upAndDown) {
            List&lt;Integer&gt; patternud = new ArrayList&lt;Integer&gt;(2 * pattern.size());
            // Collections.copy(patternud, pattern);
            patternud.addAll(pattern);
            Collections.reverse(pattern);
            // Collections.sort(pattern, Collections.reverseOrder());
            patternud.addAll(pattern);
            pattern = patternud;
            logger.debug(&quot;pattern {}&quot;, pattern);
        }

        for (int oct = 0; oct &lt; nOctaves; oct++) {
            int trans = startingMIDINumber - track.get(0).getMidiNumber();</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>185</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/xml/ChordFactoryXMLHelper.java</td><td>910</td></tr><tr class="a"><td colspan='2'><div><pre>        }

        doc.getDocumentElement().normalize();

        try {
            DOMSource domSource = new DOMSource(doc);
            StreamResult streamResult = new StreamResult(out);
            TransformerFactory tf = TransformerFactory.newInstance();
            Transformer transformer = tf.newTransformer();
            Properties oprops = new Properties();
            oprops.put(OutputKeys.INDENT, &quot;yes&quot;);
            oprops.put(OutputKeys.METHOD, &quot;xml&quot;);
            oprops.put(OutputKeys.OMIT_XML_DECLARATION, &quot;no&quot;);
            transformer.setOutputProperties(oprops);
            transformer.transform(domSource, streamResult);
        } catch (TransformerException e) {
            System.err.println(e);
        }
    }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/function/AbstractMIDINoteFunction.java</td><td>87</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/function/AbstractMusicFunction.java</td><td>101</td></tr><tr class="a"><td>com/rockhoppertech/music/modifiers/AbstractMIDINoteModifier.java</td><td>140</td></tr><tr class="b"><td>com/rockhoppertech/music/modifiers/AbstractModifier.java</td><td>142</td></tr><tr class="a"><td colspan='2'><div><pre>    }

    /**
     * @return the values
     */
    public List&lt;Number&gt; getValues() {
        return values;
    }

    /**
     * @param values
     *            the values to set
     */
    public void setValues(List&lt;Number&gt; values) {
        logger.debug(&quot;adding values {}&quot;, values);
        this.values.clear();
        for (Number n : values) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }

    private void setValues(Number[] numbers) {
        // logger.debug(&quot;setting {}&quot;, numbers);
        this.values.clear();
        for (Number n : numbers) {
            logger.debug(&quot;adding value {}&quot;, n);
            this.values.add(n);
        }
    }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>391</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>476</td></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>515</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/MIDIUtils.java</td><td>487</td></tr><tr class="a"><td colspan='2'><div><pre>        if (1 == mm) {
            major = false;
        } else {
            major = true;
        }
        String[] sharpKeys = { &quot;C&quot;, &quot;G&quot;, &quot;D&quot;, &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot; };
        String[] flatKeys = { &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot;, &quot;Db&quot;, &quot;Gb&quot;, &quot;Cb&quot; };
        String[] sharpMinorKeys = { &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot;, &quot;G#&quot;, &quot;D#&quot;, &quot;A#&quot; };
        String[] flatMinorKeys = { &quot;A&quot;, &quot;D&quot;, &quot;G&quot;, &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot; };
        int num = Math.abs(sf);</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/Interval.java</td><td>409</td></tr><tr class="b"><td>com/rockhoppertech/music/Interval.java</td><td>449</td></tr><tr class="a"><td colspan='2'><div><pre>    public static int[] getIntervalsFromString(final String s) {

        final Scanner scanner = new Scanner(s);
        if (s.indexOf(',') != -1) {
            scanner.useDelimiter(&quot;,&quot;);
        }

        final List&lt;Integer&gt; ints = new ArrayList&lt;Integer&gt;();
        while (scanner.hasNext()) {
            final String interval = scanner.next().trim();
            ints.add(Integer.parseInt(interval));
        }
        final int size = ints.size();
        // final int[] array = new int[size];
        // for (int i = 0; i &lt; array.length; i++) {
        // array[i] = ints.get(i).intValue();
        // }

        final int[] array = new int[size - 1];</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/MIDITrackFactory.java</td><td>1234</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/MIDITrackFactory.java</td><td>1295</td></tr><tr class="a"><td colspan='2'><div><pre>                if (n.getPitch().equals(lastNote.getPitch())) {
                    count++;
                    logger.debug(
                            &quot;Incrementing count to {} for {}&quot;, count, n
                                    .getPitch());
                } else {
                    mask.add(count);
                    count = 1;
                    logger.debug(
                            &quot;Resetting for pitches {} and {}&quot;, lastNote
                                    .getPitch(), n.getPitch());
                }
            }
            if (i == track.size() - 1) {
                logger.debug(
                        &quot;last note was alone, adding {} for {}&quot;, count, n);
                mask.add(count);
            }
            lastNote = n;

        }
        // for (MIDINote n : notelist) {
        // if (lastNote != null) {
        // if (n.getPitch().equals(lastNote.getPitch())) {
        // count++;
        // System.err.println(String.format(
        // &quot;Incrementing count to %d for %s&quot;, count, n
        // .getPitch()));
        // } else {
        // mask.add(count);
        // count = 1;
        // System.err.println(String.format(
        // &quot;Resetting for pitches %s and %s&quot;, lastNote.getPitch(), n
        // .getPitch()));
        // }
        // }
        // lastNote = n;
        //
        // // if(lastNote == null) {
        // // count++;
        // // } else {
        // // if(n.getPitch().equals(lastNote.getPitch())) {
        // // count++;
        // // } else {
        // // mask.add(count);
        // // count = 1;
        // // }
        // // }
        //
        // }

        return mask.toArray(new Integer[mask.size()]);
    }

    public static Integer[] getDurationMask(MIDITrack track) {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com/rockhoppertech/music/midi/js/KeySignature.java</td><td>433</td></tr><tr class="b"><td>com/rockhoppertech/music/midi/js/MIDIUtils.java</td><td>487</td></tr><tr class="a"><td colspan='2'><div><pre>        if (1 == mm) {
            major = false;
        } else {
            major = true;
        }
        String[] sharpKeys = { &quot;C&quot;, &quot;G&quot;, &quot;D&quot;, &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot; };
        String[] flatKeys = { &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot;, &quot;Db&quot;, &quot;Gb&quot;, &quot;Cb&quot; };
        String[] sharpMinorKeys = { &quot;A&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F#&quot;, &quot;C#&quot;, &quot;G#&quot;, &quot;D#&quot;, &quot;A#&quot; };
        String[] flatMinorKeys = { &quot;A&quot;, &quot;D&quot;, &quot;G&quot;, &quot;C&quot;, &quot;F&quot;, &quot;Bb&quot;, &quot;Eb&quot;, &quot;Ab&quot; };</pre></div></td></tr></table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    1996&#x2013;2014
                        <a href="http://rockhoppertech.com/">Rockhopper Technologies</a>.
            All rights reserved.      
            
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
